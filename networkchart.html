
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript" src="//d3js.org/d3.v3.js"></script>
    
    <link rel="stylesheet" type="text/css" href="/css/result-light.css">
    
  <style type="text/css">
    .link line {
    stroke: gray;}
    .link line.separator {
    stroke: white;}
    .node circle {
        stroke: gray;
    stroke-width: 1;}
    .node text {
    font: 12px calibri;
    pointer-events: none;}
    </style>

  <title>Recherche AFD</title>

<script type='text/javascript'>//<![CDATA[
window.onload=function(){

var graph =

{ "nodes": [{"name":"AES", "size":"12","id":"0"},{"name":"AFR", "size":"12","id":"1"},{"name":"ALC", "size":"12","id":"2"},{"name":"AMR", "size":"12","id":"3"},{"name":"API", "size":"12","id":"4"},{"name":"ARB", "size":"12","id":"5"},{"name":"ARC", "size":"12","id":"6"},{"name":"ASI", "size":"12","id":"7"},{"name":"CCC", "size":"12","id":"8"},{"name":"CEFEB", "size":"12","id":"9"},{"name":"CLD", "size":"12","id":"10"},{"name":"CLI", "size":"12","id":"11"},{"name":"CMI", "size":"12","id":"12"},{"name":"CMN", "size":"12","id":"13"},{"name":"DAT", "size":"12","id":"14"},{"name":"DOE", "size":"12","id":"15"},{"name":"DPO", "size":"12","id":"16"},{"name":"DSF", "size":"12","id":"17"},{"name":"EAA", "size":"12","id":"18"},{"name":"EDU", "size":"12","id":"19"},{"name":"ERS", "size":"12","id":"20"},{"name":"EVA", "size":"12","id":"21"},{"name":"FIN", "size":"12","id":"22"},{"name":"GAR", "size":"12","id":"23"},{"name":"IFP", "size":"12","id":"24"},{"name":"MED", "size":"12","id":"25"},{"name":"OMR", "size":"12","id":"26"},{"name":"PIL", "size":"12","id":"27"},{"name":"Proparco", "size":"12","id":"28"},{"name":"RED", "size":"12","id":"29"},{"name":"SAN", "size":"12","id":"30"},{"name":"SPC", "size":"12","id":"31"},{"name":"TED", "size":"12","id":"32"}],
  "links": [{"source":7,"target":24,"bond":1},{"source":7,"target":29,"bond":1},{"source":24,"target":29,"bond":1},{"source":10,"target":28,"bond":1},{"source":10,"target":29,"bond":1},{"source":28,"target":29,"bond":1},{"source":1,"target":3,"bond":1},{"source":1,"target":4,"bond":1},{"source":1,"target":29,"bond":1},{"source":1,"target":31,"bond":1},{"source":3,"target":4,"bond":1},{"source":3,"target":29,"bond":1},{"source":3,"target":31,"bond":1},{"source":4,"target":29,"bond":1},{"source":4,"target":31,"bond":1},{"source":29,"target":31,"bond":1},{"source":7,"target":10,"bond":2},{"source":7,"target":29,"bond":2},{"source":10,"target":29,"bond":2},{"source":2,"target":10,"bond":2},{"source":2,"target":29,"bond":2},{"source":10,"target":29,"bond":2},{"source":25,"target":29,"bond":1},{"source":25,"target":30,"bond":1},{"source":29,"target":30,"bond":1},{"source":9,"target":15,"bond":1},{"source":9,"target":20,"bond":1},{"source":15,"target":20,"bond":1},{"source":15,"target":29,"bond":1},{"source":15,"target":31,"bond":1},{"source":29,"target":31,"bond":1},{"source":1,"target":24,"bond":2},{"source":1,"target":29,"bond":2},{"source":24,"target":29,"bond":2},{"source":1,"target":29,"bond":3},{"source":24,"target":29,"bond":3},{"source":0,"target":19,"bond":1},{"source":0,"target":29,"bond":1},{"source":19,"target":29,"bond":1},{"source":26,"target":29,"bond":5},{"source":5,"target":13,"bond":2},{"source":20,"target":25,"bond":2},{"source":0,"target":19,"bond":1},{"source":6,"target":10,"bond":1},{"source":14,"target":29,"bond":1},{"source":5,"target":29,"bond":1},{"source":5,"target":30,"bond":1},{"source":29,"target":30,"bond":1},{"source":5,"target":16,"bond":1},{"source":5,"target":29,"bond":1},{"source":16,"target":29,"bond":1},{"source":5,"target":29,"bond":7},{"source":5,"target":18,"bond":1},{"source":5,"target":25,"bond":1},{"source":5,"target":29,"bond":1},{"source":18,"target":25,"bond":1},{"source":18,"target":29,"bond":1},{"source":25,"target":29,"bond":1},{"source":6,"target":9,"bond":1},{"source":21,"target":23,"bond":1},{"source":13,"target":18,"bond":1},{"source":28,"target":32,"bond":1},{"source":4,"target":20,"bond":1},{"source":10,"target":13,"bond":1},{"source":19,"target":21,"bond":1},{"source":19,"target":27,"bond":1},{"source":21,"target":27,"bond":1},{"source":3,"target":29,"bond":1},{"source":10,"target":29,"bond":12},{"source":5,"target":18,"bond":1},{"source":5,"target":29,"bond":1},{"source":18,"target":29,"bond":1},{"source":8,"target":16,"bond":1},{"source":8,"target":21,"bond":1},{"source":16,"target":21,"bond":1},{"source":1,"target":7,"bond":1},{"source":1,"target":21,"bond":1},{"source":1,"target":24,"bond":1},{"source":7,"target":21,"bond":1},{"source":7,"target":24,"bond":1},{"source":21,"target":24,"bond":1},{"source":19,"target":28,"bond":1},{"source":11,"target":18,"bond":2},{"source":1,"target":10,"bond":1},{"source":1,"target":21,"bond":1},{"source":10,"target":21,"bond":1},{"source":11,"target":24,"bond":1},{"source":11,"target":28,"bond":1},{"source":24,"target":28,"bond":1},{"source":9,"target":10,"bond":1},{"source":11,"target":13,"bond":3},{"source":11,"target":14,"bond":1},{"source":11,"target":13,"bond":1},{"source":11,"target":28,"bond":1},{"source":13,"target":28,"bond":1},{"source":10,"target":11,"bond":2},{"source":10,"target":29,"bond":2},{"source":11,"target":29,"bond":2},{"source":11,"target":18,"bond":1},{"source":11,"target":29,"bond":1},{"source":11,"target":32,"bond":1},{"source":18,"target":29,"bond":1},{"source":18,"target":32,"bond":1},{"source":29,"target":32,"bond":1},{"source":24,"target":28,"bond":2},{"source":24,"target":29,"bond":2},{"source":28,"target":29,"bond":2},{"source":5,"target":11,"bond":1},{"source":5,"target":18,"bond":1},{"source":5,"target":29,"bond":1},{"source":5,"target":32,"bond":1},{"source":11,"target":18,"bond":1},{"source":11,"target":29,"bond":1},{"source":11,"target":32,"bond":1},{"source":18,"target":29,"bond":1},{"source":18,"target":32,"bond":1},{"source":29,"target":32,"bond":1},{"source":8,"target":25,"bond":2},{"source":13,"target":30,"bond":1},{"source":11,"target":26,"bond":1},{"source":11,"target":29,"bond":1},{"source":26,"target":29,"bond":1},{"source":1,"target":10,"bond":2},{"source":1,"target":29,"bond":2},{"source":10,"target":29,"bond":2},{"source":10,"target":11,"bond":2},{"source":25,"target":32,"bond":2},{"source":16,"target":21,"bond":1},{"source":1,"target":24,"bond":1},{"source":15,"target":29,"bond":1},{"source":9,"target":25,"bond":2},{"source":29,"target":32,"bond":2},{"source":5,"target":16,"bond":1},{"source":5,"target":19,"bond":1},{"source":5,"target":24,"bond":1},{"source":5,"target":29,"bond":1},{"source":16,"target":19,"bond":1},{"source":16,"target":24,"bond":1},{"source":16,"target":29,"bond":1},{"source":19,"target":24,"bond":1},{"source":19,"target":29,"bond":1},{"source":24,"target":29,"bond":1},{"source":16,"target":19,"bond":1},{"source":13,"target":19,"bond":1},{"source":13,"target":29,"bond":1},{"source":19,"target":29,"bond":1},{"source":1,"target":9,"bond":1},{"source":1,"target":25,"bond":1},{"source":9,"target":25,"bond":1},{"source":12,"target":18,"bond":1},{"source":12,"target":29,"bond":1},{"source":18,"target":29,"bond":1},{"source":9,"target":11,"bond":1},{"source":9,"target":25,"bond":1},{"source":11,"target":25,"bond":1},{"source":11,"target":29,"bond":1},{"source":2,"target":29,"bond":1},{"source":2,"target":32,"bond":1},{"source":29,"target":32,"bond":1},{"source":9,"target":10,"bond":1},{"source":9,"target":18,"bond":1},{"source":9,"target":32,"bond":1},{"source":10,"target":18,"bond":1},{"source":10,"target":32,"bond":1},{"source":18,"target":32,"bond":1},{"source":18,"target":29,"bond":4},{"source":1,"target":18,"bond":2},{"source":1,"target":21,"bond":2},{"source":18,"target":21,"bond":2},{"source":9,"target":15,"bond":1},{"source":9,"target":20,"bond":1},{"source":9,"target":31,"bond":1},{"source":15,"target":20,"bond":1},{"source":15,"target":31,"bond":1},{"source":20,"target":31,"bond":1},{"source":9,"target":14,"bond":1},{"source":5,"target":10,"bond":1},{"source":5,"target":21,"bond":1},{"source":5,"target":29,"bond":1},{"source":10,"target":21,"bond":1},{"source":10,"target":29,"bond":1},{"source":21,"target":29,"bond":1},{"source":5,"target":13,"bond":1},{"source":5,"target":21,"bond":1},{"source":13,"target":21,"bond":1},{"source":1,"target":18,"bond":1},{"source":1,"target":13,"bond":2},{"source":10,"target":31,"bond":1},{"source":8,"target":19,"bond":2},{"source":19,"target":29,"bond":13},{"source":5,"target":11,"bond":1},{"source":1,"target":21,"bond":1},{"source":0,"target":14,"bond":1},{"source":0,"target":26,"bond":1},{"source":0,"target":29,"bond":1},{"source":14,"target":26,"bond":1},{"source":14,"target":29,"bond":1},{"source":26,"target":29,"bond":1},{"source":1,"target":3,"bond":1},{"source":10,"target":21,"bond":2},{"source":10,"target":26,"bond":2},{"source":21,"target":26,"bond":2},{"source":9,"target":24,"bond":1},{"source":9,"target":28,"bond":1},{"source":9,"target":29,"bond":1},{"source":24,"target":28,"bond":1},{"source":24,"target":29,"bond":1},{"source":28,"target":29,"bond":1},{"source":9,"target":32,"bond":1},{"source":29,"target":31,"bond":1},{"source":11,"target":17,"bond":1},{"source":1,"target":19,"bond":2},{"source":1,"target":25,"bond":2},{"source":1,"target":29,"bond":2},{"source":1,"target":30,"bond":2},{"source":19,"target":25,"bond":2},{"source":19,"target":29,"bond":2},{"source":19,"target":30,"bond":2},{"source":25,"target":29,"bond":2},{"source":25,"target":30,"bond":2},{"source":29,"target":30,"bond":2},{"source":2,"target":13,"bond":2},{"source":19,"target":25,"bond":3},{"source":8,"target":29,"bond":1},{"source":9,"target":18,"bond":1},{"source":9,"target":22,"bond":1},{"source":18,"target":25,"bond":2},{"source":18,"target":29,"bond":2},{"source":25,"target":29,"bond":2},{"source":13,"target":29,"bond":1},{"source":4,"target":29,"bond":3},{"source":1,"target":5,"bond":2},{"source":1,"target":21,"bond":2},{"source":5,"target":21,"bond":2},{"source":5,"target":21,"bond":1},{"source":5,"target":24,"bond":1},{"source":21,"target":24,"bond":1},{"source":26,"target":29,"bond":1},{"source":26,"target":32,"bond":1},{"source":29,"target":32,"bond":1},{"source":18,"target":25,"bond":2},{"source":2,"target":9,"bond":1},{"source":2,"target":10,"bond":1},{"source":2,"target":18,"bond":1},{"source":2,"target":32,"bond":1},{"source":9,"target":10,"bond":1},{"source":9,"target":18,"bond":1},{"source":9,"target":32,"bond":1},{"source":10,"target":18,"bond":1},{"source":10,"target":32,"bond":1},{"source":18,"target":32,"bond":1},{"source":8,"target":10,"bond":1},{"source":8,"target":21,"bond":1},{"source":8,"target":29,"bond":1},{"source":10,"target":21,"bond":1},{"source":10,"target":29,"bond":1},{"source":21,"target":29,"bond":1},{"source":20,"target":32,"bond":1},{"source":5,"target":9,"bond":1},{"source":5,"target":24,"bond":1},{"source":9,"target":24,"bond":1},{"source":10,"target":25,"bond":1},{"source":7,"target":13,"bond":1},{"source":25,"target":29,"bond":3},{"source":13,"target":24,"bond":1},{"source":21,"target":29,"bond":1},{"source":24,"target":25,"bond":2}]};

var width = 900;
var height = 800;
var padding = 10;

var color = d3.scale.category20();

var radius = d3.scale.sqrt()
.range([0, 5]);

var scale = d3.scale.linear();

var svg = d3.select("body").append("svg")
.attr("width", width)
.attr("height", height);

var svg2 = d3.select("body").append("svg")
.attr("width", width)
.attr("height", height);


var force = d3.layout.force()
.size([width, height])
    .linkStrength(0.1)
    .friction(0.9)
    .charge(-750)
    .gravity(0.1)
    .theta(0.8)
    .alpha(0.1)

.linkDistance(function(d) {
return radius(d.source.size) + radius(d.target.size) + (30 / (2*d.bond-1))
; });

// network diagram stuff

force
.nodes(graph.nodes)
.links(graph.links)
.on("tick", tick)
.start();



var link = svg.selectAll(".link")
.data(graph.links)
.enter().append("g")
.attr("class", "link");

link.append("line")
.style("stroke-width", function(d) { return (d.bond * 2 - 1) * 1.25 + "px"; });

link.filter(function(d) { return d.bond > 1; }).append("line")
.attr("class", "separator");

var node = svg.selectAll(".node")
.data(graph.nodes)
.enter().append("g")
.attr("class", function(d) { return "node " + d.name + " " + d.location; })
.call(force.drag)
.on("mouseover", function(d) { 
// I would like to insert an if statement to do all of these things to the connected nodes
// if(isConnected(d, o)) {
d3.select(this).select("circle").style("stroke-width", 6); 
d3.select(this).select("circle").style("stroke", "orange"); 
d3.select(this).select("text").style("font", "20px sans-serif");
d3.selectAll("rect." + d.location).style("stroke-width", 6);
d3.selectAll("rect." + d.location).style("stroke", "orange");
d3.selectAll("text." + d.location).style("font", "20px sans-serif");
d3.selectAll("tr." + d.name).style("background-color", "orange");
//}
})
.on("mouseout",  function(d) { 
// if(isConnected(d, o)) {
d3.select(this).select("circle").style("stroke-width", 1.5); 
d3.select(this).select("circle").style("stroke", "gray"); 
d3.select(this).select("text").style("font", "12px sans-serif");
d3.selectAll("rect." + d.location).style("stroke-width", 1.5);
d3.selectAll("rect." + d.location).style("stroke", "gray");
d3.selectAll("text." + d.location).style("font", "12px sans-serif");
d3.selectAll("tr." + d.name).style("background-color", "white");
//}
});

node.append("circle")
.attr("r", function(d) { return radius(d.size); })
.style("fill", function(d) { return color(d.name); });

node.append("text")
.attr("dy", ".35em")
.attr("text-anchor", "middle")
.text(function(d) { return d.name; });

var linkedByIndex = {};
graph.links.forEach(function(d) {
linkedByIndex[d.source.index + "," + d.target.index] = 1;
});

function isConnected(a, b) {
return linkedByIndex[a.index + "," + b.index] || linkedByIndex[b.index + "," + a.index] || a.index == b.index;
}

function tick() {
link.selectAll("line")
.attr("x1", function(d) { return d.source.x; })
.attr("y1", function(d) { return d.source.y; })
.attr("x2", function(d) { return d.target.x; })
.attr("y2", function(d) { return d.target.y; });
node.attr("transform", function(d) { 
return "translate(" + d.x + "," + d.y + ")"; });
}
}//]]> 

</script>
</head>
<body>
</body>
<span style="font-size:22px">Mapping Agence Française de Développement's departments collaboration on research projects.</span><br>
<span style="font-size:14px"><i>Thomas Roca, Research Direction, AFD. with <a href="">D3js</a></i></span>
</html>
